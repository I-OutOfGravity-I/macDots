DROP TABLE IF EXISTS Schueler_belegt_Kurs;
DROP TABLE IF EXISTS Note;
DROP TABLE IF EXISTS NotenTyp;
DROP TABLE IF EXISTS Kurs;
Drop TABLE If EXISTS Gewichtung;
DROP TABLE IF EXISTS Notenschluessel;
DROP TABLE IF EXISTS Fach;
DROP TABLE IF EXISTS Schueler;
DROP TABLE IF EXISTS Klasse;
DROP TABLE IF EXISTS Lehrer;
DROP TABLE IF EXISTS Person;
DROP TABLE IF EXISTS Account;

CREATE TABLE Account (
  Accountid INTEGER PRIMARY KEY,
  Benutzername TEXT NOT NULL,
  Password TEXT NOT NULL
); 
CREATE TABLE Person (
  Personid INTEGER PRIMARY KEY ,
  Accountid INTEGER NOT NULL,
  Vorname VARCHAR(50) NOT NULL,
  Nachname VARCHAR(50) NOT NULL,
  Geschlecht CHAR(1) NOT NULL,
  FOREIGN KEY (Accountid) REFERENCES Account(Accountid)
); 
CREATE TABLE Lehrer (
  Lehrerid INTEGER PRIMARY KEY ,
  Personid INTEGER NOT NULL,
  FOREIGN KEY (Personid) REFERENCES Person(Personid)
); 
CREATE TABLE Klasse (
  Klasseid INTEGER PRIMARY KEY ,
  Jahrgang INTEGER NOT NULL,
  Name VARCHAR(50) NOT NULL
); 
CREATE TABLE Schueler (
  Schuelerid INTEGER PRIMARY KEY ,
  Personid INTEGER NOT NULL,
  Klasseid INTEGER NOT NULL,
  FOREIGN KEY (Personid) REFERENCES Person(Personid),
  FOREIGN KEY (Klasseid) REFERENCES Klasse(Klasseid)
); 
CREATE TABLE Fach (
  Fachid INTEGER PRIMARY KEY ,
  Name VARCHAR(50) NOT NULL,
  Beschreibung VARCHAR(200) NOT NULL
); 

CREATE TABLE Notenschluessel (
PunkteIHK INT,
NoteIHK DOUBLE(1.1),
NoteninWorten VARCHAR(50)
);

CREATE TABLE Gewichtung (
  Gewichtungid INTEGER PRIMARY KEY ,
  SomiNoteGewichtungProzent INTEGER NOT NULL,
  KlausurNoteGewichtungProzent INTEGER NOT NULL
); 

CREATE TABLE Kurs (
  Kursid INTEGER PRIMARY KEY ,
  Lehrerid INTEGER NOT NULL,
  Fachid INTEGER NOT NULL,
  Jahrgang INTEGER NOT NULL,
  FOREIGN KEY (Lehrerid) REFERENCES Lehrer(Lehrerid),
  FOREIGN KEY (Fachid) REFERENCES Fach(Fachid)
); 
CREATE TABLE NotenTyp (
  NotenTypid INTEGER PRIMARY KEY ,
  Bezeichnung VARCHAR(50) NOT NULL
); 
CREATE TABLE Schueler_belegt_Kurs (
  Schueler_belegt_Kursid INTEGER PRIMARY KEY ,
  Schuelerid INTEGER NOT NULL,
  Kursid INTEGER NOT NULL,
  Noteid INTEGER NOT NUll,
  FOREIGN KEY (Schuelerid) REFERENCES Schueler(Schuelerid),
  FOREIGN KEY (Kursid) REFERENCES Kurs(Kursid),
  Foreign Key (Noteid) REFERENCES Note(Noteid)
);
CREATE TABLE Note (
  Noteid INTEGER PRIMARY KEY ,
  NotenTypid INTEGER NOT NULL,
  NoteInProzent INTEGER NOT NULL,
  erstesHalbjahr BOOLEAN NOT NULL,
  zweitesHalbjahr BOOLEAN NOT NULL,
  Jahrgang INTEGER NOT NULL,
  FOREIGN KEY (NotenTypid) REFERENCES NotenTyp(NotenTypid)
);